uÅ¾ivatel pÃ­Å¡e do jednoho search baru

vÃ½sledky jsou akce (commands) + pÅ™Ã­padnÄ› entity (zvÃ­Å™ata, lidÃ©) â€“ to uÅ¾ mÃ¡te

synonyma pomÅ¯Å¾ou najÃ­t akce i kdyÅ¾ uÅ¾ivatel pÃ­Å¡e jinak

u vÃ½sledkÅ¯ bude vidÄ›t â€œproÄ to naÅ¡loâ€ (ikonka + match text)

novÃ© funkce se integrujÃ­ postupnÄ› pÅ™es metadata (aÅ¥ Claude vÃ­, kde to rozÅ¡iÅ™ovat)

MVP: â€œUnified Searchâ€ + Synonymika jen pro commandy
CÃ­l MVP
UÅ¾ivatel napÃ­Å¡e vakcÃ­ny a search nabÃ­dne akci â€œZapsat oÄkovÃ¡nÃ­â€ / â€œOÄkovÃ¡nÃ­â€ i kdyÅ¾ se menu jmenuje jinak.

U vÃ½sledku uvidÃ­ malÃ½ Å¡tÃ­tek:

ğŸ” synonym: vakcÃ­ny â†’ oÄkovÃ¡nÃ­

nebo ğŸ” label match: oÄkovÃ¡nÃ­

V admin nastavenÃ­ bude jednoduchÃ½ editor synonym + tlaÄÃ­tko â€œNavrhnout synonyma (AI)â€ (jen nÃ¡vrh, ruÄnÄ› potvrdit).

Co je â€œCommandâ€ (akce) v MVP
Command = jedna navigaÄnÃ­ poloÅ¾ka nebo akce v appce (route / modal / panel).

KaÅ¾dÃ½ command mÃ¡ metadata:

type Command = {
  id: string
  title: string              // zobrazovanÃ© jmÃ©no
  description?: string       // krÃ¡tkÃ½ popis
  href?: string              // kam navigovat
  icon?: string              // nÃ¡zev ikonky (lucide)
  keywords: string[]         // ruÄnÃ­ klÃ­ÄovÃ¡ slova (bez synonym)
  tags: string[]             // napÅ™. ["medical","inventory"]
}
MVP pravidlo hledÃ¡nÃ­ commandÅ¯:

normalizuj text (lowercase + bez diakritiky)

najdi match na:

title

keywords

synonyms (pÅ™es slovnÃ­k)

Å¾Ã¡dnÃ¡ vÃ¡ha, Å¾Ã¡dnÃ© sloÅ¾itÃ© dotazy:

prostÄ› â€œobsahuje substringâ€ nebo â€œtoken matchâ€

SynonymnÃ­ slovnÃ­k (ruÄnÃ­ + AI nÃ¡vrhy)
UloÅ¾enÃ­: klidnÄ› jako JSON v DB (rychlÃ©), nebo jednoduchÃ¡ tabulka.

MVP struktura:

type SynonymEntry = {
  canonical: string          // napÅ™. "ockovani"
  synonyms: string[]         // ["vakciny","vakcinace","imunizace"]
  locale: "cs" | "en"
}
Jak se pouÅ¾ije v searchi (MVP jednoduchost)
uÅ¾ivatelÅ¯v dotaz q se normalizuje â†’ qNorm

vytvoÅ™Ã­Å¡ expandedTerms = [qNorm] + vÅ¡echny synonyma, kde qNorm je canonical nebo v synonyms

pak jen testujeÅ¡: â€œobsahuje nÄ›kterÃ½ term title/keywords?â€

Jak zobrazit â€œproÄ to matchloâ€
KaÅ¾dÃ½ vÃ½slednÃ½ command dostane matchReason:

label (match v title)

keyword:<word>

synonym:<typed>â†’<canonical>

UI potom ukÃ¡Å¾e malÃ½ badge:

ğŸ” title nebo ğŸ· keyword nebo ğŸ” synonym

Jak do toho postupnÄ› integrovat novÃ© funkce (bez rozkopÃ¡nÃ­)
Varianty (doporuÄenÃ­: zaÄni nejjednoduÅ¡Å¡Ã­)
Varianta A (MVP nejrychlejÅ¡Ã­): â€œregistry souborâ€
vytvoÅ™Ã­Å¡ jeden soubor apps/web/app/lib/search/commands.ts

ruÄnÄ› tam pÅ™idÃ¡vÃ¡Å¡ commandy (id, title, href, icon, keywords, tags)

vÃ½hoda: jednoduchÃ©, kontrola

nevÃ½hoda: musÃ­Å¡ myslet na pÅ™idÃ¡nÃ­

Varianta B (lepÅ¡Ã­ postupnÃ¡ integrace): â€œmetadata u strÃ¡nkyâ€
kaÅ¾dÃ¡ strÃ¡nka (route) mÅ¯Å¾e exportovat metadata:

export const searchMeta = {
  commands: [
    { id: "medical.vaccination", title: "OÄkovÃ¡nÃ­", href: "/dashboard/medical", keywords: ["vakciny","vzteklina"] }
  ]
}
pÅ™i buildu (nebo runtime) se z toho udÄ›lÃ¡ index commandÅ¯

MVP kompromis: zaÄni Varianta A, ale nastav strukturu tak, aby Å¡la pozdÄ›ji pÅ™evÃ©st na B.

Admin UI pro synonyma + AI nÃ¡vrhy (AI nepouÅ¾Ã­vat pÅ™i hledÃ¡nÃ­)
UI: /dashboard/settings/search
Sekce:

Synonyma

seznam canonical termÅ¯

edit synonyms (add/remove)

tlaÄÃ­tko â€œNavrhnout synonyma (AI)â€

Command registry

read-only seznam commandÅ¯ (aÅ¥ admin vÃ­, co je indexovanÃ©)

quick link â€œUpravit keywordsâ€ (pokud MVP dovolÃ­)

AI nÃ¡vrhy (pouze asistovanÃ©)
Admin klikne na command â€œOÄkovÃ¡nÃ­â€

AI dostane: title + description + keywords + tags + locale

AI vrÃ¡tÃ­ seznam nÃ¡vrhÅ¯ synonym + krÃ¡tkÃ© odÅ¯vodnÄ›nÃ­

Admin klikne â€œPÅ™idat vybranÃ©â€

DÅ¯leÅ¾itÃ© MVP pravidlo: AI nic samo neuklÃ¡dÃ¡ bez potvrzenÃ­.

Co bude v search vÃ½sledcÃ­ch (UI)
Jeden search bar â†’ vÃ½sledky rozdÄ›lenÃ© do sekcÃ­:

Akce (commandy)

ZvÃ­Å™ata

LidÃ©

KaÅ¾dÃ¡ poloÅ¾ka:

ikonka

nÃ¡zev

malÃ½ â€œreason chipâ€:

ğŸ” synonym: vakcÃ­ny â†’ oÄkovÃ¡nÃ­

ğŸ· keyword: vzteklina

ğŸ” title match

Jak to udrÅ¾Ã­Å¡ pouÅ¾itelnÃ© v Äase (mini systÃ©m)
Pravidlo pro tÃ½m (proces)
KdyÅ¾ pÅ™idÃ¡Å¡ novou feature:

pÅ™idej command do registru (nebo searchMeta)

pÅ™idej 2â€“5 keywords

pokud to mÃ¡ Äasto jinÃ© nÃ¡zvoslovÃ­, klikni v adminu â€œAI nÃ¡vrhyâ€ â†’ vyber 3â€“8 synonym

Tohle je pÅ™esnÄ› ta â€œpostupnÃ¡ integraceâ€ bez pÅ™estÅ™elenÃ­.

Co ode mÄ› chceÅ¡ jako dalÅ¡Ã­ krok
MÅ¯Å¾u ti z toho udÄ›lat pÅ™Ã­mo zadÃ¡nÃ­ pro Claude Code jako EPIC (backend + frontend + data model + UI), ale Å™ekni mi jednu vÄ›c:

ChceÅ¡ synonyma Å™eÅ¡it jen pro â€œAkce/Commandyâ€, nebo i pro entity (zvÃ­Å™ata/lidi)?
(MVP bych fakt nechal jen na commandy, aÅ¥ to je rychlÃ© a nerozbije to relevance u zvÃ­Å™at.)

dej zadÃ¡nÃ­ pro claude code, nezmiÅˆuj tam to AI asi vÅ¯bec aÅ¥ ho nepleteme
NÃ­Å¾e je zadÃ¡nÃ­ pro Claude Code (bez zmÃ­nek o AI), pro MVP â€œUnified Searchâ€ tak, aby Å¡lo v jednom search baru hledat akce (navigace/funkce) i entity (zvÃ­Å™ata, lidÃ©) a zÃ¡roveÅˆ aby fungovala jednoduchÃ¡ synonymika u akcÃ­.

EPIC: Unified Search (Akce + ZvÃ­Å™ata + LidÃ©) + Synonyma pro akce (MVP)
Kontext
V aplikaci uÅ¾ existuje search bar (v headeru). Dnes se pouÅ¾Ã­vÃ¡ hlavnÄ› na hledÃ¡nÃ­ zvÃ­Å™at a lidÃ­. S rostoucÃ­ komplexitou platformy potÅ™ebujeme, aby uÅ¾ivatel v jednom search baru naÅ¡el i â€œfunkceâ€ typu naskladnÄ›nÃ­, oÄkovÃ¡nÃ­, inventÃ¡Å™, darovacÃ­ smlouva â€” bez toho, aby se zavÃ¡dÄ›ly sloÅ¾itÃ© dotazovacÃ­ operÃ¡tory.

CÃ­l MVP
Zachovat jeden search bar v top headeru.

UÅ¾ivatel mÅ¯Å¾e psÃ¡t napÅ™. RafÃ­k, NovÃ¡k, ale i naskladnÄ›nÃ­, vakcÃ­ny, oÄkovÃ¡nÃ­, odpis, hotel.

VÃ½sledky se zobrazÃ­ ve tÅ™ech sekcÃ­ch:

Akce (navigaÄnÃ­ poloÅ¾ky / â€œcommandsâ€)

ZvÃ­Å™ata

LidÃ©

Pro Akce musÃ­ fungovat jednoduchÃ¡ synonymika (napÅ™. vakcÃ­ny â†’ â€œOÄkovÃ¡nÃ­â€).

U kaÅ¾dÃ©ho vÃ½sledku musÃ­ bÃ½t vidÄ›t â€œproÄâ€ se matchnul (napÅ™. badge ğŸ” synonym, ğŸ” title, ğŸ· keyword).

Scope (MVP)
1) â€œAkce / Commandsâ€ index (frontend)
Implementuj jednoduchÃ½ registry seznam akcÃ­, kterÃ© se majÃ­ vyhledÃ¡vat.

DatovÃ½ model (TypeScript)

VytvoÅ™ apps/web/app/lib/search/commands.ts:

export type Command = {
  id: string
  title: string
  description?: string
  href: string
  icon?: any // lucide component reference
  keywords: string[] // bez synonym, jen ruÄnÄ›
  tags?: string[]
}
PoÅ¾adavky na registry

Naplnit minimÃ¡lnÄ› o klÃ­ÄovÃ© akce:

Dashboard

ZvÃ­Å™ata (list)

Detail zvÃ­Å™ete (nepovinnÃ©)

OÄkovÃ¡nÃ­ / Medical

Inventory (seznam)

Inventory: transakce / pÅ™Ã­jem / vÃ½dej / odpis (mÅ¯Å¾e bÃ½t jako deep-link na existujÃ­cÃ­ route)

Hotel (rezervace)

NÃ¡kupnÃ­ seznam (panel / strÃ¡nka pokud existuje)

Kontakty / People

Reports

Settings

Help

KaÅ¾dÃ½ command musÃ­ mÃ­t keywords (2â€“10 slov).

Ikonky pouÅ¾ij lucide, stejnÄ› jako v sidebaru.

2) Synonymika (MVP, jen pro Akce)
ZavÃ©st jednoduchÃ½ slovnÃ­k synonym (bez jakÃ½chkoliv dotazovacÃ­ch operÃ¡torÅ¯, bez vÃ¡Å¾enÃ­).

DatovÃ½ model

VytvoÅ™ apps/web/app/lib/search/synonyms.ts:

export type SynonymEntry = {
  canonical: string
  synonyms: string[]
  locale: 'cs' | 'en'
}

export const SYNONYMS: SynonymEntry[] = [
  { canonical: 'ockovani', synonyms: ['vakciny', 'vakcina', 'vakcinace', 'imunizace'], locale: 'cs' },
  { canonical: 'naskladneni', synonyms: ['prijem', 'prijmout', 'dorazilo', 'dodavka'], locale: 'cs' },
  { canonical: 'odpis', synonyms: ['vyrazeni', 'ztrata', 'skoda'], locale: 'cs' },
  // â€¦
]
Normalizace textu

Implementuj helper normalize(text):

lowercase

odstranit diakritiku (Ã¡â†’a)

trim

nahradit vÃ­cenÃ¡sobnÃ© mezery jednou

RozÅ¡Ã­Å™enÃ­ dotazu

Z dotazu q udÄ›lej qNorm.

VytvoÅ™ expandedTerms:

vÅ¾dy obsahuje qNorm

pokud qNorm odpovÃ­dÃ¡ canonical nebo nÄ›kterÃ©mu synonymu, pÅ™idej i canonical + vÅ¡echny jeho synonyms

NepouÅ¾Ã­vej AND/OR. Jen: â€œjestli se nÄ›kterÃ½ term vyskytuje v title/keywordsâ€.

Match logika (MVP)

Command je match pokud:

nÄ›kterÃ½ expandedTerm je substring v normalize(command.title)

nebo v nÄ›kterÃ©m normalize(keyword)

VraÅ¥ i matchReason:

title

keyword:<kw>

synonym:<typed>â†’<canonical>

3) Unified Search UX (header + overlay)
Zachovat stÃ¡vajÃ­cÃ­ header search bar, ale rozÅ¡Ã­Å™it ho o overlay vÃ½sledkÅ¯.

ChovÃ¡nÃ­

Po focus do search inputu a pÅ™i psanÃ­:

zobraz dropdown/overlay panel pod inputem

zobrazuje sekce: Akce / ZvÃ­Å™ata / LidÃ©

Escape zavÅ™e panel

Enter:

kdyÅ¾ je vybranÃ½ vÃ½sledek, provede navigaci na jeho href

Å ipky nahoru/dolÅ¯ pro vÃ½bÄ›r poloÅ¾ky (MVP doporuÄeno)

VÃ½sledky

KaÅ¾dÃ½ item:

ikonka

label

malÃ½ reason badge:

ğŸ” title

ğŸ· keyword

ğŸ” synonym

Sekce majÃ­ nadpis a oddÄ›lovaÄ.

4) Integrace se stÃ¡vajÃ­cÃ­m vyhledÃ¡vÃ¡nÃ­m zvÃ­Å™at a lidÃ­
NemÄ›Åˆ API logiku pro zvÃ­Å™ata/lidi, pouze sjednoÅ¥ UI vÃ½stup do jednoho overlay panelu.

VÃ½sledky zvÃ­Å™at a lidÃ­ ponech podle stÃ¡vajÃ­cÃ­ho chovÃ¡nÃ­ (jakmile existujÃ­).

Akce jsou ÄistÄ› lokÃ¡lnÃ­ (frontend registry).

Non-goals (vÃ½slovnÄ› nedÄ›lat v MVP)
Å½Ã¡dnÃ© OR/AND operÃ¡tory v dotazu.

Å½Ã¡dnÃ© vÃ¡hy, skÃ³rovÃ¡nÃ­, relevance modely.

Å½Ã¡dnÃ© fulltext vyhledÃ¡vÃ¡nÃ­ na backendu.

Å½Ã¡dnÃ© generovÃ¡nÃ­ synonym automaticky.

Å½Ã¡dnÃ© uklÃ¡dÃ¡nÃ­ historie vyhledÃ¡vÃ¡nÃ­ / analytics.

AkceptaÄnÃ­ kritÃ©ria
KdyÅ¾ uÅ¾ivatel napÃ­Å¡e vakcÃ­ny, uvidÃ­ v sekci Akce poloÅ¾ku vedoucÃ­ na Medical/OÄkovÃ¡nÃ­, s badge ğŸ” synonym.

KdyÅ¾ napÃ­Å¡e naskladnÄ›nÃ­, uvidÃ­ v sekci Akce link na inventory/nÃ¡kupy/pÅ™Ã­jem (dle existujÃ­cÃ­ route) a badge ğŸ” title nebo ğŸ· keyword nebo ğŸ” synonym.

KdyÅ¾ napÃ­Å¡e jmÃ©no zvÃ­Å™ete RafÃ­k, stÃ¡le se zobrazÃ­ v sekci ZvÃ­Å™ata.

JedinÃ½ search bar, jednotnÃ½ overlay a konzistentnÃ­ UI.

KÃ³d je snadno rozÅ¡iÅ™itelnÃ½: pÅ™idÃ¡nÃ­ novÃ© funkce = pÅ™idat novÃ½ Command do registry + keywords (+ pÅ™Ã­padnÄ› synonym entry).

TechnickÃ© poznÃ¡mky / ImplementaÄnÃ­ tipy
DoporuÄenÃ¡ struktura:

app/lib/search/normalize.ts

app/lib/search/commands.ts

app/lib/search/synonyms.ts

app/lib/search/searchCommands.ts (funkce vracejÃ­cÃ­ matchy + reason)

Overlay mÅ¯Å¾e bÃ½t shadcn Command komponenta (pokud ji uÅ¾ pouÅ¾Ã­vÃ¡te) nebo vlastnÃ­.

VÃ½sledky renderuj â€œflat listâ€ s oddÄ›lovaÄi sekcÃ­, ale zachovej sekÄnÃ­ nadpisy.

Dbej na vÃ½kon: debounce input 150â€“250ms pro entity fetch (pokud uÅ¾ fetchujete), akce match je instantnÃ­.

DodÃ¡nÃ­
PR obsahuje:

novÃ© soubory registry a synonym

aktualizaci header search komponenty na unified overlay

zÃ¡kladnÃ­ sada commandÅ¯ pokrÃ½vajÃ­cÃ­ hlavnÃ­ navigaci

unit testy pro normalize + synonym expansion (pokud mÃ¡te test setup; jinak aspoÅˆ jednoduchÃ© runtime sanity)