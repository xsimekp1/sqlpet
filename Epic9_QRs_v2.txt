EPIC: QR kódy pro zvířata + batch tisk “sheetů” (kennels + animals)
Kontext (co už existuje)

V modulu Kennels už máte funkci generování QR kódu, který vede na veřejnou stránku kotce (pro návštěvníky).

QR pro kennel je tedy ověřený pattern (route + vizuální komponenta + tisk).

Cíl epiku

Přidat generování QR kódu pro samotné zvíře (odkaz na veřejný profil zvířete).

Rozšířit UI o možnost batch generování: „Vygeneruj sheet se všemi QR“ (pro zvířata i pro kotce).

Tiskový výstup musí být přehledný:

pod QR zvířete zobrazit jeho public kód v systému (např. DOG-2024-001) a ideálně i jméno

pod QR kennelu zobrazit kód kennelu (např. KOTEC-A12) a ideálně i název/zóna

Uživatelské scénáře (MVP)
A) QR pro kennel (single)

User otevře detail kennelu (existuje).

Vidí QR, který vede na veřejnou stránku kennelu.

Nově: vedle/ pod QR je vždy text: kód kennelu (a případně zóna).

B) QR pro zvíře (single)

User otevře detail zvířete.

Nové tlačítko: “QR kód” (nebo “Vygenerovat QR”).

Zobrazí se modal / panel s QR:

odkazuje na veřejnou stránku zvířete

pod QR: public_code + jméno

akce: “Tisk” / “Stáhnout PDF” (dle toho, co už máte pro kennel)

C) Batch tisk “sheetu”

Na místě, kde se dnes generuje QR (kennel detail / animal detail), přidat tlačítko:

“Vytisknout sheet (všechny …)”

Dvě varianty sheetu:

Sheet všech kennelů (pro útulek / zónu / filtr)

Sheet všech zvířat (typicky “aktuální v organizaci”, případně dle filtru)

V batch view se user rozhodne:

co zahrnout (všichni / podle filtru / podle výběru checkboxy)

formát štítků (A4, mřížka) + počet sloupců

UI/UX zadání (konkrétně)
1) Animal detail – QR sekce

Do detailu zvířete přidat sekci v pravém panelu nebo do “Actions”:

tlačítko QR kód

Po kliknutí:

otevřít modal s náhledem QR

text pod QR:

{animal.public_code}

{animal.name} (menším fontem)

sekundární akce:

“Print”

“Export PDF” (pokud už umíte)

Důležité: QR musí být použitelný pro tisk (dostatečný kontrast a velikost).

2) Kennel detail – doplnění popisku

V existující kennel QR sekci doplnit:

pod QR: {kennel.code}

(volitelně: zóna / typ)

3) Batch generování – kde to v UI bude

MVP návrh (nepřekopat navigaci):

Přidat v:

/dashboard/kennels: tlačítko “QR sheet – kennels”

/dashboard/animals: tlačítko “QR sheet – animals”

Alternativně (pokud chcete striktně „tam kde generuju“):

V modal pro QR (animal/kennel) přidat sekundární CTA:

“Vytisknout sheet všech …”

Batch screen/modal

Zobrazit:

počet položek

volby:

Scope: All / Filtered / Selected

Layout: “A4 – 3×4”, “A4 – 4×5” (pár presetů)

Label content:

Animals: QR + public_code + name

Kennels: QR + kennel_code (+ zone)

Tlačítko: Generate PDF

Technické zadání
1) URL/route pro QR

Kennel QR už existuje → zachovat.

Animal QR musí vést na public animal page:

preferovat stabilní identifikátor pro veřejnost:

buď /[locale]/public/animals/[id]

nebo lépe /public/animals/[public_code] (pokud existuje)

Vybrat 1 konzistentní veřejnou route a tu používat pro QR.

2) Generování QR

Použít stejnou knihovnu/komponentu jako pro kennel QR.

QR musí být renderovatelný jak v UI, tak v PDF exportu.

3) Batch PDF “sheet”

Implementovat export do PDF (pokud už existuje pro kennel, znovupoužít).

PDF layout:

A4

grid štítků

každý štítek:

QR (např. 35–45 mm)

text pod (max 2 řádky)

Ošetřit stránkování: automaticky pokračovat na další stránku.

4) API data pro batch

Pro batch animals:

potřebujete list: id, public_code, name, public_url

Pro batch kennels:

id, code, zone/name, public_url

Pokud už veřejné URL nejde přímo z API, sestavit na frontendu z known route.

5) Performance a limity

MVP limit: max např. 200 QR v jednom batch exportu (aby PDF generování nebolelo).

Při větším počtu: varování a možnost vybrat subset / filtr.

Integrace se stávajícím designem (důležité)

Button pro “Generate sheet” použít stejný “primary action” styl jako ostatní “tisk/export” akce.

QR modal a batch modal mají používat stejný styl panelů, spacing, typografii.

Acceptance criteria

Na detailu zvířete lze zobrazit QR kód vedoucí na veřejný profil zvířete.

Pod QR zvířete je vidět public_code a jméno.

Na detailu kennelu je pod QR vidět kód kennelu.

Existuje batch export do PDF:

ze seznamu zvířat (nebo z QR modalu) → sheet všech / filtrovaných / vybraných zvířat

ze seznamu kennelů (nebo z QR modalu) → sheet všech / filtrovaných / vybraných kennelů

PDF je v mřížce, čitelné, správně stránkuje.